<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batch Details</title>
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+Sans:ital,wght@0,500;1,500&family=Roboto+Slab&family=Satisfy&display=swap" rel="stylesheet">

</head>
<style>
    *{
    padding:0;
    margin:0;
    box-sizing:border-box;
    font-family: 'Roboto Slab', serif;
    list-style:none;
    text-decoration:none;
}
header{
    position:fixed;
    right:0;
    top:0;
    z-index:1000;
    width:100%;
    display:flex;
    align-items: center;
    justify-content: space-between;
    padding:33px 9%;
    background:transparent
}
.logo{
    font-size:30px;
    font-weight:700;
    color:#ffcb9a;
}
.navlist{
    display:flex;
}
.navlist a{
    color:#ffcb9a;
    margin-left:60px;
    font-size:15px;
    font-weight:600;
    border-bottom:2px solid transparent;
    transition: all .55s ease;
}
.navlist a:hover,
.navlist a.active{
    border-bottom:2px solid white;
}
#menu-icon{
    color:white;
    font-size:35px;
    z-index:1001;
    cursor:pointer;
    display:none;
}
.hero{
    height:100%;
    width:100%;
    min-height:100vh;
    position:relative;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    align-items: center;
    gap:2rem;
    background:linear-gradient(109.6deg, rgb(36, 45, 57) 11.2%, rgb(16, 37, 60) 51.2%, rgb(0, 0, 0) 98.6%)  no-repeat;
}
section{
    padding:0 19%;
}
table {
    position:relative;
    border: 2px solid transparent;
    border-collapse: collapse;
    color:white;
    width:80%;
    font-size: 16px;
    height:14%;
    margin-left: -3%;
    text-align: center;
  }

  th, td {
    padding:15px;
    border: 1px solid transparent;
  }
  .glass{
    top:30%;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    position: absolute;
    left:13%;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 2px;
    border:1px solid rgba(255, 255, 255, 0.18);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
  }
  @media(max-width:1535px) {
    header{
        padding:15px 3%;
        transition:.2s;
    }
    .icons{
        padding:0 3%;
        transition:.2s;
    }
    .scroll-down{
        right:3%;
        transition:.2s;
    }

}
@media(max-width:1460px){
    section{
        padding:0 12%;
        transition: .2s;
    }
    .batch-text{
        left:-10%;
    }
}

@media (max-width:1340px){
    .hero-img img{
        width:100%;
        height:auto;
    }
    .hero-text h1{
        font-size:75px;
        margin:0 0 30px;
    }
    .batch-text{
        margin-left:-11%;
    }

}
@media(max-width:1195px){
    section{
        padding:0 3%;
        transition:.2s;
    }
    .hero-text{
        padding-top:115px;
    }
    .hero-img{
        text-align:center;
        margin-right: 100px;
        size:70%
    }
    hero-img img{
        width:560px;
        height:auto;
    }
    .hero{
        height:100%;
        gap:1rem;
        grid-template-columns:1fr ;
    }
    .icons{
        display:none;
    }
    .scroll-down{
        display:none;
    }
    .batch-text{
        margin-left:5%;
    }
}
@media(max-width:990px){
    #menu-icon{
        display:block;
    }
    .navlist{
        position:absolute;
        border-radius: 0.5em;
        right:-100%;
        width:300px;
        height:4vh;
        background:#323741;
        border:1px #363a43 solid;
        box-shadow: 0 0.5em 1em rgba(0,0,0,0.2);
        display:flex;
        align-items:center;
        flex-direction:column;
        padding:200px 20px;
        transition:all .55s ease;
    }
    .navlist a{
        margin-left:0;
        display:block;
        margin:7px 0;
    }
    .navlist.open{
        right:0;
    }
    .dropdown .dropbtn {
        font-size: 14px;
        padding: 10px 16px; /* Adjust padding for smaller screens */
        left: auto; /* Remove the left positioning */
    }
}
 @media(max-width:790px){
    input[type="date"]{
        font-size: 80%;
      }
}
@media(max-width:680px){
    .hero-img img{
        width:100%;
        height:auto;

    }
    input[type="date"]{
        font-size: 75%;

      }
}
@media(max-width:670px){
    .hero-img img{
        width:100%;
        height:auto;

    }
    input[type="date"]{
        font-size: 70%;

      }
}
@media(max-width:620px){
    .hero-img img{
        width:100%;
        height:auto;
    }
    input[type="date"]{
        font-size: 60%;
      }
} 
@media(max-width:570px){
    .hero-img img{
        width:100%;
        height:auto;
    }
    input[type="date"]{
        font-size: 55%;
      }
} 
button{
    padding:10px;
    width:35%;
    position: relative;
    left:80%;
    font-size: 16px;
    border-radius: 30px;
    border:none;
    color:#d1e8e2;
    background-color:#434b5b;
  }
  button a{
    text-decoration: none;
    color:#d1e8e2;
  }
  .user-greeting {
        color: #d1e8e2; /* Change this color to your desired color (e.g., red) */
       }
</style>
<body>
    <section class="hero"> 
        <header>
            <a href="index.html" class="logo"><i>ADIVANA</i></a>
            <ul class="navlist">
                <h4 id="greet" class="user-greeting"></h4>
                <li><a href="new.html">Home</a></li>
                <li><a href="batch_details.html"  class="active">Batch</a></li>
                <li><a href="student_details.html">Student</a></li>
                <li><a href="teach_details.html">Teacher</a></li>
            </ul>
            <div class="bx bx-menu" id="menu-icon"></div>
        </header>
        <p style=" color:#ffcb9a; font-size:40px">Batch Details</p>
        <button type="button"><a href="batch_add.html">Add</a></button>
        <br>
    <div class="container mt-3">

        <table class="table glass">
            <thead>
                <th>Serial No.</th>
                <th>Batch Name</th>
                <th>Batch ID</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Session</th>
            </thead>
            <tbody id="tbody1"></tbody>
            
        </table>
    </div>

    <script type="module">
        var stdNo=0;
        var tbody=document.getElementById('tbody1');

        function AddItemToTable(name,id,start,end,shift){
            let row=document.createElement("tr");
            let td1=document.createElement("td");
            let td2=document.createElement("td");
            let td3=document.createElement("td");
            let td4=document.createElement("td");
            let td5=document.createElement("td");
            let td6=document.createElement("td");

            td1.innerHTML=++stdNo;
            td2.innerHTML=name;
            td3.innerHTML=id;
            td4.innerHTML=start;
            td5.innerHTML=end;
            td6.innerHTML=shift;

            row.appendChild(td1);
            row.appendChild(td2);
            row.appendChild(td3);
            row.appendChild(td4);
            row.appendChild(td5);
            row.appendChild(td6);

            tbody.appendChild(row);

        }


        function AddAllItemsToTable(TheStudent){
            stdNo=0;
            tbody.innerHTML="";
            TheStudent.forEach(element=>{
                AddItemToTable(element.BatchName,element.BatchID,element.StartTime,element.EndTime,element.Shift)
            });
        }


        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-analytics.js";
        import{getFirestore, doc, getDoc, getDocs, onSnapshot, collection
        }
        from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";

        // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
        apiKey: "AIzaSyDT_ANzuq6_uYgLuhl3MW-48p8K_2Kbt2g",
        authDomain: "batch-details.firebaseapp.com",
        databaseURL: "https://batch-details-default-rtdb.firebaseio.com",
        projectId: "batch-details",
        storageBucket: "batch-details.appspot.com",
        messagingSenderId: "574128376047",
        appId: "1:574128376047:web:755c79cea25f68d17d731a",
        measurementId: "G-H8NHEMRT3Z"
      };

            // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        const db =getFirestore();

        async function GetAllDataOnce(){
            const querySnapshot=await getDocs(collection(db,"Batch List"));

            var students=[];

            querySnapshot.forEach(doc=>{

                students.push(doc.data());
            });

            AddAllItemsToTable(students);
        }

        async function GetAllDataRealtime(){
            const dbRef=collection(db,"Batch List");

            onSnapshot(dbRef,(querySnapshot)=>{
                var students=[];

                querySnapshot.forEach(doc=>{
                    students.push(doc.data());
                });
                AddAllItemsToTable(students);
            })
        }
            

        window.onload =GetAllDataRealtime;
let menu=document.querySelector('#menu-icon');
let navlist=document.querySelector('.navlist');

menu.onclick=()=>{
    menu.classList.toggle('bx-x');
    navlist.classList.toggle('open');
};
let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
    let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));

    let GreetHead = document.getElementById('greet');
    let Navlist = document.getElementById('navlist');
    let SignoutBtn; // declare SignoutBtn outside functions to access it globally
    let CreateAccountLink; // declare CreateAccountLink outside functions to access it globally

    let Signout = () => {
        sessionStorage.removeItem("user-creds");
        sessionStorage.removeItem("user-info");
        GreetHead.innerText = '';
        if (SignoutBtn) {
            SignoutBtn.style.display = 'none'; // hide the sign-out link
        }
        if (CreateAccountLink) {
            CreateAccountLink.innerText = 'Login';
            CreateAccountLink.href = '1.html';
            CreateAccountLink.style.display = 'block'; // display the create account link
            CreateAccountLink.classList.add('navlist-link'); // add the appropriate class for styling
        }
    }

    let CheckCred = () => {
        if (UserCreds) {
            GreetHead.innerText = `Hii ${UserInfo.firstname} ${UserInfo.lastname}!  `;
            const navlistItem = document.createElement('li');

            // Sign out link
            SignoutBtn = document.createElement('a');
            SignoutBtn.href = '#'; // replace with the appropriate link
            SignoutBtn.innerText = 'Sign Out';
            SignoutBtn.onclick = Signout;
            SignoutBtn.classList.add('navlist-link'); // add the appropriate class for styling
            navlistItem.appendChild(SignoutBtn);

            // Create account link
            CreateAccountLink = document.createElement('a');
            CreateAccountLink.style.display = 'none'; // hide the link by default
            CreateAccountLink.classList.add('navlist-link'); // add the appropriate class for styling
            navlist.appendChild(navlistItem);
            navlist.appendChild(CreateAccountLink);
        } else {
            CreateAccountLink = document.createElement('a');
            CreateAccountLink.href = '1.html'; // Replace with the appropriate link
            CreateAccountLink.innerText = 'Login';
            CreateAccountLink.classList.add('navlist-link'); // add the appropriate class for styling
            navlist.appendChild(CreateAccountLink);
        }
    };

    window.addEventListener('load', CheckCred);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"></script>
</body>
</html>